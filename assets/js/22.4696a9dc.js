(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{225:function(v,_,s){"use strict";s.r(_);var t=s(28),e=Object(t.a)({},(function(){var v=this,_=v.$createElement,s=v._self._c||_;return s("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[s("h1",{attrs:{id:"深入-session-会话-机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#深入-session-会话-机制"}},[v._v("#")]),v._v(" 深入 Session(会话) 机制")]),v._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#消息处理"}},[v._v("消息处理")]),s("ul",[s("li",[s("a",{attrs:{href:"#发送群消息"}},[v._v("发送群消息")])]),s("li",[s("a",{attrs:{href:"#发送好友消息"}},[v._v("发送好友消息")])]),s("li",[s("a",{attrs:{href:"#撤回消息"}},[v._v("撤回消息")])])])]),s("li",[s("a",{attrs:{href:"#信息获取"}},[v._v("信息获取")]),s("ul",[s("li",[s("a",{attrs:{href:"#获取机器人账号加入的群组"}},[v._v("获取机器人账号加入的群组")])]),s("li",[s("a",{attrs:{href:"#获取机器人账号所拥有的好友"}},[v._v("获取机器人账号所拥有的好友")])]),s("li",[s("a",{attrs:{href:"#获取特定群组的成员列表"}},[v._v("获取特定群组的成员列表")])]),s("li",[s("a",{attrs:{href:"#获取特定群组的成员数量"}},[v._v("获取特定群组的成员数量")])]),s("li",[s("a",{attrs:{href:"#从已缓存的群组列表中获取-group-对象"}},[v._v("从已缓存的群组列表中获取 Group 对象")])]),s("li",[s("a",{attrs:{href:"#从已缓存的好友列表中获取-friend-对象"}},[v._v("从已缓存的好友列表中获取 Friend 对象")])]),s("li",[s("a",{attrs:{href:"#缓存群组列表"}},[v._v("缓存群组列表")])]),s("li",[s("a",{attrs:{href:"#缓存好友列表"}},[v._v("缓存好友列表")])]),s("li",[s("a",{attrs:{href:"#强制刷新群组列表缓存"}},[v._v("强制刷新群组列表缓存")])]),s("li",[s("a",{attrs:{href:"#强制刷新好友列表缓存"}},[v._v("强制刷新好友列表缓存")])])])]),s("li",[s("a",{attrs:{href:"#群管理"}},[v._v("群管理")]),s("ul",[s("li",[s("a",{attrs:{href:"#全体禁言"}},[v._v("全体禁言")])]),s("li",[s("a",{attrs:{href:"#取消全体禁言"}},[v._v("取消全体禁言")])]),s("li",[s("a",{attrs:{href:"#获取群员信息"}},[v._v("获取群员信息")])]),s("li",[s("a",{attrs:{href:"#修改群员信息"}},[v._v("修改群员信息")])]),s("li",[s("a",{attrs:{href:"#获取机器人的群成员信息"}},[v._v("获取机器人的群成员信息")])]),s("li",[s("a",{attrs:{href:"#获取群设置"}},[v._v("获取群设置")])]),s("li",[s("a",{attrs:{href:"#修改群设置"}},[v._v("修改群设置")])]),s("li",[s("a",{attrs:{href:"#禁言群成员"}},[v._v("禁言群成员")])]),s("li",[s("a",{attrs:{href:"#取消禁言"}},[v._v("取消禁言")])]),s("li",[s("a",{attrs:{href:"#将成员从群组中删除"}},[v._v("将成员从群组中删除")])])])])])]),s("p"),v._v(" "),s("p",[v._v("在 "),s("code",[v._v("python-mirai")]),v._v(" 中, 与无头客户端的交互主要由 "),s("code",[v._v("session")]),v._v(" 暴露出的 API 完成,\n这些 API 作为方法, 将输入的参数序列化后发往无头客户端以完成一次操作.")]),v._v(" "),s("p",[v._v("接下来, 我们将深入其 API, 并一一讲解.")]),v._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),s("p",[v._v("在实际的代码中, "),s("code",[v._v("Session")]),v._v(" 其实继承了 "),s("code",[v._v("MiraiProtocol")]),v._v(",\n通过操作其暴露出的各式方法, 来完成一系列的操作.")]),v._v(" "),s("p",[v._v("你可以在 "),s("code",[v._v("mirai.protocol")]),v._v(" 内找到 "),s("code",[v._v("MiraiProtocol")]),v._v(" 的定义.")])]),v._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),s("p",[v._v("最近推出的 "),s("code",[v._v("Application")]),v._v(" 机制中, "),s("code",[v._v("Mirai")]),v._v(" 其实也继承了 "),s("code",[v._v("MiraiProtocol")]),v._v("."),s("br"),v._v("\n这意味着你仍然可以在 "),s("code",[v._v("Application")]),v._v(" 中使用本文档中包含的各式方法.")])]),v._v(" "),s("h2",{attrs:{id:"消息处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消息处理"}},[v._v("#")]),v._v(" 消息处理")]),v._v(" "),s("p",[v._v("目前, 我们支持两种消息类型的发送, 即 "),s("code",[v._v("FriendMessage")]),v._v(" 和 "),s("code",[v._v("GroupMessage")]),v._v(".")]),v._v(" "),s("h3",{attrs:{id:"发送群消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发送群消息"}},[v._v("#")]),v._v(" 发送群消息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.sendGroupMessage")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 发送消息到指定目标群")]),v._v(" "),s("li",[s("strong",[v._v("警告")]),v._v(": 当机器人被禁言时调用该方法, 将不会有消息发出, 同时可能抛出错误("),s("code",[v._v("mirai.exceptions.NetworkError")]),v._v(")")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 发送消息目标群")]),v._v(" "),s("li",[s("code",[v._v("message")]),v._v(" "),s("ul",[s("li",[v._v("可为以下类型的其中一种("),s("code",[v._v("Union")]),v._v("):\n"),s("ul",[s("li",[s("code",[v._v("MessageChain")])]),v._v(" "),s("li",[s("code",[v._v("<? extend BaseMessageComponent>")])]),v._v(" "),s("li",[s("code",[v._v("List[<? extend BaseMessageComponent>]")])]),v._v(" "),s("li",[s("code",[v._v("str")])])])])])]),v._v(" "),s("li",[s("code",[v._v("quoteSource: Optional[Union[Source, int]]")]),v._v(": 指定回复的消息")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("BotMessage")]),v._v("("),s("code",[v._v("mirai.message.types.BotMessage")]),v._v(")")]),v._v(" "),s("li",[v._v("可能抛出的错误:\n"),s("ul",[s("li",[s("p",[s("code",[v._v("ValueError")]),v._v(": 没有找到目标群, 无法发送")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("EnvironmentError")]),v._v(": 检查检查实例化 "),s("code",[v._v("Session")]),v._v(" 时填入的信息")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("ConnectionRefusedError")]),v._v(": 尝试重启")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("PermissionError")]),v._v(": 权限不足")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("RuntimeError")]),v._v(": 序列化失败, 尝试联系开发者")])])])]),v._v(" "),s("li",[v._v("样例:"),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[v._v("# 非上下文.")]),v._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("await")]),v._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("sendGroupMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[v._v("123456789")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(",")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),v._v("Plain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[v._v('"发送了一条群消息"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),v._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[v._v("# 与上下文连用")]),v._v("\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[v._v("@session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("receiver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[v._v('"GroupMessage"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("async")]),v._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("def")]),v._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[v._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(":")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("await")]),v._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("sendGroupMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("\n        context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[v._v("id")]),v._v("\n        context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("messageChain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(",")]),v._v("\n        quoteSource"),s("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("messageChain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("getFirstComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("Source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n")])]),v._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[v._v("1")]),s("br"),s("span",{staticClass:"line-number"},[v._v("2")]),s("br"),s("span",{staticClass:"line-number"},[v._v("3")]),s("br"),s("span",{staticClass:"line-number"},[v._v("4")]),s("br"),s("span",{staticClass:"line-number"},[v._v("5")]),s("br"),s("span",{staticClass:"line-number"},[v._v("6")]),s("br"),s("span",{staticClass:"line-number"},[v._v("7")]),s("br"),s("span",{staticClass:"line-number"},[v._v("8")]),s("br"),s("span",{staticClass:"line-number"},[v._v("9")]),s("br"),s("span",{staticClass:"line-number"},[v._v("10")]),s("br"),s("span",{staticClass:"line-number"},[v._v("11")]),s("br"),s("span",{staticClass:"line-number"},[v._v("12")]),s("br"),s("span",{staticClass:"line-number"},[v._v("13")]),s("br"),s("span",{staticClass:"line-number"},[v._v("14")]),s("br")])])])]),v._v(" "),s("h3",{attrs:{id:"发送好友消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发送好友消息"}},[v._v("#")]),v._v(" 发送好友消息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.sendFriendMessage")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 发送消息到指定目标好友")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("friend: Union[Friend, int]")]),v._v(": 发送消息目标好友")]),v._v(" "),s("li",[s("code",[v._v("message")]),v._v(" "),s("ul",[s("li",[v._v("可为以下类型的其中一种("),s("code",[v._v("Union")]),v._v("):\n"),s("ul",[s("li",[s("code",[v._v("MessageChain")])]),v._v(" "),s("li",[s("code",[v._v("<? extend BaseMessageComponent>")])]),v._v(" "),s("li",[s("code",[v._v("List[<? extend BaseMessageComponent>]")])]),v._v(" "),s("li",[s("code",[v._v("str")])])])])])])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("BotMessage")]),v._v("("),s("code",[v._v("mirai.message.types.BotMessage")]),v._v(")")]),v._v(" "),s("li",[v._v("可能抛出的错误:\n"),s("ul",[s("li",[s("p",[s("code",[v._v("ValueError")]),v._v(": 没有找到目标好友, 无法发送")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("EnvironmentError")]),v._v(": 检查检查实例化 "),s("code",[v._v("Session")]),v._v(" 时填入的信息")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("ConnectionRefusedError")]),v._v(": 你可以尝试重启应用")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("PermissionError")]),v._v(": 权限不足")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("RuntimeError")]),v._v(": 序列化失败, 尝试联系开发者")])])])]),v._v(" "),s("li",[v._v("样例:"),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("await")]),v._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("sendFriendMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[v._v("123456789")]),v._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),v._v("Plain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),v._v("text"),s("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[v._v('"这是一条好友消息"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),v._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n")])]),v._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[v._v("1")]),s("br"),s("span",{staticClass:"line-number"},[v._v("2")]),s("br"),s("span",{staticClass:"line-number"},[v._v("3")]),s("br"),s("span",{staticClass:"line-number"},[v._v("4")]),s("br")])])])]),v._v(" "),s("h3",{attrs:{id:"撤回消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#撤回消息"}},[v._v("#")]),v._v(" 撤回消息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.revokeMessage")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 撤回自己或者群员的信息(需要管理员/群主权限)")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("source: T.Union[Source, int]")]),v._v(": 需要撤回的目标消息")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("bool")])]),v._v(" "),s("li",[v._v("可能抛出的错误:\n"),s("ul",[s("li",[s("p",[s("code",[v._v("ValueError")]),v._v(": 无法找到指定目标")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("PermissionError")]),v._v(": 权限不足")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("EnvironmentError")]),v._v(": 检查检查实例化 "),s("code",[v._v("Session")]),v._v(" 时填入的信息")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("ConnectionRefusedError")]),v._v(": 你可以尝试重启应用")])]),v._v(" "),s("li",[s("p",[s("code",[v._v("RuntimeError")]),v._v(": 序列化失败, 尝试联系开发者")])])])])]),v._v(" "),s("h2",{attrs:{id:"信息获取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#信息获取"}},[v._v("#")]),v._v(" 信息获取")]),v._v(" "),s("h3",{attrs:{id:"获取机器人账号加入的群组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取机器人账号加入的群组"}},[v._v("#")]),v._v(" 获取机器人账号加入的群组")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.groupList")])]),v._v(" "),s("ul",[s("li",[s("strong",[v._v("警告")]),v._v(": 若你在实例化 "),s("code",[v._v("Session")]),v._v(" 时未显式传入参数 "),s("code",[v._v("cache_groups")]),v._v(" 的值,\n则不需要通过调用该API再次抓取群组列表, 请通过 "),s("code",[v._v("Session.cached_groups")]),v._v(" 访问已经被缓存的群,\n这是一个 "),s("code",[v._v("Dict[int, Group]")]),v._v(", 妥善使用.")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("List[Group]")])])]),v._v(" "),s("h3",{attrs:{id:"获取机器人账号所拥有的好友"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取机器人账号所拥有的好友"}},[v._v("#")]),v._v(" 获取机器人账号所拥有的好友")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.friendList")])]),v._v(" "),s("ul",[s("li",[s("strong",[v._v("警告")]),v._v(": 若你在实例化 "),s("code",[v._v("Session")]),v._v(" 时未显式传入参数 "),s("code",[v._v("cache_friends")]),v._v(" 的值,\n则不需要通过调用该API再次抓取群组列表, 请通过 "),s("code",[v._v("Session.cached_friends")]),v._v(" 访问已经被缓存的群,\n这是一个 "),s("code",[v._v("Dict[int, Friend]")]),v._v(", 妥善使用.")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("List[Friend]")])])]),v._v(" "),s("h3",{attrs:{id:"获取特定群组的成员列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取特定群组的成员列表"}},[v._v("#")]),v._v(" 获取特定群组的成员列表")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.memberList")])]),v._v(" "),s("ul",[s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 群组的群号")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("List[Member]")])])]),v._v(" "),s("h3",{attrs:{id:"获取特定群组的成员数量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取特定群组的成员数量"}},[v._v("#")]),v._v(" 获取特定群组的成员数量")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.groupMemberNumber")])]),v._v(" "),s("ul",[s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 群组的群号")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("int")])])]),v._v(" "),s("h3",{attrs:{id:"从已缓存的群组列表中获取-group-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从已缓存的群组列表中获取-group-对象"}},[v._v("#")]),v._v(" 从已缓存的群组列表中获取 Group 对象")]),v._v(" "),s("p",[s("code",[v._v("Session.getGroup")])]),v._v(" "),s("ul",[s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 群组的群号")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("Optional[Group]")])])]),v._v(" "),s("h3",{attrs:{id:"从已缓存的好友列表中获取-friend-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从已缓存的好友列表中获取-friend-对象"}},[v._v("#")]),v._v(" 从已缓存的好友列表中获取 Friend 对象")]),v._v(" "),s("p",[s("code",[v._v("Session.getFriend")])]),v._v(" "),s("ul",[s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 好友的QQ号")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("Optional[Friend]")])])]),v._v(" "),s("h3",{attrs:{id:"缓存群组列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存群组列表"}},[v._v("#")]),v._v(" 缓存群组列表")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.cacheBotGroups")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 若在实例化时没有设置缓存, 则从无头客户端处拉取群组列表")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: 无返回值")])]),v._v(" "),s("h3",{attrs:{id:"缓存好友列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存好友列表"}},[v._v("#")]),v._v(" 缓存好友列表")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.cacheBotFriends")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 若在实例化时没有设置缓存, 则从无头客户端处拉取好友列表")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: 无返回值")])]),v._v(" "),s("h3",{attrs:{id:"强制刷新群组列表缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制刷新群组列表缓存"}},[v._v("#")]),v._v(" 强制刷新群组列表缓存")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.refreshBotGroupsCache")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 强制刷新群组列表, 无论是否已经缓存")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("List[Group]")])])]),v._v(" "),s("h3",{attrs:{id:"强制刷新好友列表缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制刷新好友列表缓存"}},[v._v("#")]),v._v(" 强制刷新好友列表缓存")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.refreshBotFriendsCache")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 强制刷新好友列表, 无论是否已经缓存")]),v._v(" "),s("li",[v._v("参数列表: 不需要传入参数")]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("List[Friend]")])])]),v._v(" "),s("h2",{attrs:{id:"群管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#群管理"}},[v._v("#")]),v._v(" 群管理")]),v._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[v._v("WARNING")]),v._v(" "),s("p",[v._v("此部分的绝大多数内容需要机器人账号具有管理员甚至群主级的权限,\n若你的程序抛出 "),s("code",[v._v("PermissionError")]),v._v(", 请先检查机器人账号的权限,\n若仍存在该问题, 请在主项目 "),s("code",[v._v("python-mirai")]),v._v(" 处新增一个 ISSUE.")])]),v._v(" "),s("h3",{attrs:{id:"全体禁言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全体禁言"}},[v._v("#")]),v._v(" 全体禁言")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.muteAll")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 在指定群组处启用全体禁言")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 要操作的群号")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])])]),v._v(" "),s("h3",{attrs:{id:"取消全体禁言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#取消全体禁言"}},[v._v("#")]),v._v(" 取消全体禁言")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.unmuteAll")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 在指定群组处启用全体禁言")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("target: int")]),v._v(": 要操作的群号")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])])]),v._v(" "),s("h3",{attrs:{id:"获取群员信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取群员信息"}},[v._v("#")]),v._v(" 获取群员信息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.memberInfo")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 获取指定群组内指定群员的信息")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 指定群组")]),v._v(" "),s("li",[s("code",[v._v("member: Union[Member, int]")]),v._v(": 指定群员")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("MemberChangeableSetting")])]),v._v(" "),s("li",[v._v("权限限制: 无")])]),v._v(" "),s("h3",{attrs:{id:"修改群员信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改群员信息"}},[v._v("#")]),v._v(" 修改群员信息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.changeMemberInfo")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 修改群成员的信息(特殊头衔, 群名片)")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")]),v._v(" "),s("li",[s("code",[v._v("member: Union[Member, int]")]),v._v(": 目标成员")]),v._v(" "),s("li",[s("code",[v._v("info: MemberChangeableSetting")]),v._v(": 要加以修改的设置")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v("): 仅能更改群名片")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v("): 可设置特殊头衔与群名片")]),v._v(" "),s("li",[v._v("修改自身: 仅能更改群名片")])])]),v._v(" "),s("li",[v._v("温馨提示: 因为 pydantic 无法不将值为 "),s("code",[v._v("null")]),v._v(" 的键忽略,\n所以请先使用获取群员信息的接口, 并通过 "),s("code",[v._v("MemberChangeableSetting.modify")]),v._v(" 更改其属性再提交.")])]),v._v(" "),s("h3",{attrs:{id:"获取机器人的群成员信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取机器人的群成员信息"}},[v._v("#")]),v._v(" 获取机器人的群成员信息")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.botMemberInfo")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 获取机器人账号在目标群的成员信息")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("MemberChangeableSetting")])])]),v._v(" "),s("h3",{attrs:{id:"获取群设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取群设置"}},[v._v("#")]),v._v(" 获取群设置")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.groupConfig")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 获取指定群的设置")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")])])]),v._v(" "),s("li",[v._v("返回值: "),s("code",[v._v("GroupSetting")])])]),v._v(" "),s("h3",{attrs:{id:"修改群设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改群设置"}},[v._v("#")]),v._v(" 修改群设置")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.changeGroupConfig")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 修改群成员的信息(特殊头衔, 群名片)")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")]),v._v(" "),s("li",[s("code",[v._v("config: GroupSetting")]),v._v(": 要加以修改的设置")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])]),v._v(" "),s("li",[v._v("温馨提示: 因为 pydantic 无法不将值为 "),s("code",[v._v("null")]),v._v(" 的键忽略,\n所以请先使用获取群设置的接口, 并通过 "),s("code",[v._v("GroupSetting.modify")]),v._v(" 更改其属性再提交.")])]),v._v(" "),s("h3",{attrs:{id:"禁言群成员"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁言群成员"}},[v._v("#")]),v._v(" 禁言群成员")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.mute")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 禁言群成员")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")]),v._v(" "),s("li",[s("code",[v._v("member: Union[Member, int]")]),v._v(": 目标成员")]),v._v(" "),s("li",[s("code",[v._v("time: Union[timedelta, int]")]),v._v(": 禁言时长")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])]),v._v(" "),s("li",[v._v("温馨提示:\n"),s("ul",[s("li",[v._v("由于客观原因, 你只能设置参数 "),s("code",[v._v("time")]),v._v(' 为一个\n"所直接表现值小于 30 天 并且大于 1 分钟的值",'),s("br"),v._v("\n若其直接表现值大于 30 天, 将只会禁言该成员 30 天,"),s("br"),v._v("\n若其直接表现值小于 1 分钟, 将只会禁言该成员 1 分钟.")]),v._v(" "),s("li",[v._v("由于客观原因, 导致管理员"),s("strong",[v._v("无法禁言")]),v._v("群主及其他管理员, 此时会抛出 "),s("code",[v._v("PermissionError")]),v._v(", 请注意.")])])])]),v._v(" "),s("h3",{attrs:{id:"取消禁言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#取消禁言"}},[v._v("#")]),v._v(" 取消禁言")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.unmute")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 取消之前对指定群成员的禁言")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")]),v._v(" "),s("li",[s("code",[v._v("member: Union[Member, int]")]),v._v(": 目标成员")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])]),v._v(" "),s("li",[v._v("温馨提示:\n"),s("ul",[s("li",[v._v("由于客观原因, 导致管理员"),s("strong",[v._v("无法解禁")]),v._v("由群主禁言的管理员或是自己, 此时会抛出 "),s("code",[v._v("PermissionError")]),v._v(", 请注意.")])])])]),v._v(" "),s("h3",{attrs:{id:"将成员从群组中删除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将成员从群组中删除"}},[v._v("#")]),v._v(" 将成员从群组中删除")]),v._v(" "),s("p",[s("strong",[v._v("Coroutine")]),v._v(" "),s("code",[v._v("Session.kick")])]),v._v(" "),s("ul",[s("li",[v._v("描述: 将指定群成员从群组中删除")]),v._v(" "),s("li",[v._v("参数列表:\n"),s("ul",[s("li",[s("code",[v._v("group: Union[Group, int]")]),v._v(": 目标群组")]),v._v(" "),s("li",[s("code",[v._v("member: Union[Member, int]")]),v._v(": 目标成员")])])]),v._v(" "),s("li",[v._v("返回值: 返回值无意义("),s("code",[v._v("bool")]),v._v(")")]),v._v(" "),s("li",[v._v("权限限制:\n"),s("ul",[s("li",[v._v("管理员("),s("code",[v._v("Permission.Administrator")]),v._v(")")]),v._v(" "),s("li",[v._v("群主("),s("code",[v._v("Permission.Owner")]),v._v(")")])])]),v._v(" "),s("li",[v._v("温馨提示:\n"),s("ul",[s("li",[v._v("由于客观原因, 导致管理员"),s("strong",[v._v("无法踢出")]),v._v("其他管理员及群主, 此时会抛出 "),s("code",[v._v("PermissionError")]),v._v(", 请注意.")])])])])])}),[],!1,null,null,null);_.default=e.exports}}]);