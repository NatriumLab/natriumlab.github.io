(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{215:function(s,t,n){"use strict";n.r(t);var a=n(28),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"认识-annotations-特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认识-annotations-特性"}},[s._v("#")]),s._v(" 认识 Annotations 特性")]),s._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#什么是-annotations"}},[s._v("什么是 Annotations?")])]),n("li",[n("a",{attrs:{href:"#在-python-mirai-中的应用"}},[s._v("在 python-mirai 中的应用")]),n("ul",[n("li",[n("a",{attrs:{href:"#基本案例"}},[s._v("基本案例")])])])])])]),n("p"),s._v(" "),n("h2",{attrs:{id:"什么是-annotations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是-annotations"}},[s._v("#")]),s._v(" 什么是 Annotations?")]),s._v(" "),n("p",[s._v("即 Python 3.5 及以上版本的特性 类型注解(Annotations).\n于 "),n("a",{attrs:{href:"https://www.python.org/dev/peps/pep-3107/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PEP3107"),n("OutboundLink")],1),s._v(" 中被提出,\n并于 "),n("a",{attrs:{href:"https://www.python.org/dev/peps/pep-0526/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PEP526"),n("OutboundLink")],1),s._v(" 中强化,\n使之可以覆盖到变量层面.")]),s._v(" "),n("p",[s._v("主要的实现 "),n("code",[s._v("typing")]),s._v(" 是 Python 的标准库.")]),s._v(" "),n("h2",{attrs:{id:"在-python-mirai-中的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-python-mirai-中的应用"}},[s._v("#")]),s._v(" 在 python-mirai 中的应用")]),s._v(" "),n("p",[s._v("我们使用 Annotations 特性来给事件运行主体分发上下文项, 并基于其提供了附加功能.")]),s._v(" "),n("h3",{attrs:{id:"基本案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本案例"}},[s._v("#")]),s._v(" 基本案例")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mirai "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    Session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Member"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Friend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    GroupMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" FriendMessage\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("receiver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GroupMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("GMHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Member"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" GroupMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("receiver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FriendMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("FMHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" friend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Friend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" FriendMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("当你做好类型推断后, 只需要按照规则调用就好.")]),s._v(" "),n("p",[s._v("可以作为注解项的类型(值):")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("mirai.Session")]),s._v(": 会话本身.")]),s._v(" "),n("li",[n("code",[s._v("mirai.GroupMessage")]),s._v(": "),n("strong",[s._v("只能在事件 GroupMessage 内使用")]),s._v(", GroupMessage实例.")]),s._v(" "),n("li",[n("code",[s._v("mirai.FriendMessage")]),s._v(": "),n("strong",[s._v("只能在事件 FriendMessage 内使用")]),s._v(", FriendMessage实例.")]),s._v(" "),n("li",[n("code",[s._v("mirai.Source")]),s._v(": "),n("strong",[s._v("只能在事件 FriendMessage, GroupMessage 内使用")]),s._v(", 消息的 "),n("code",[s._v("Source")]),s._v(" 对象, 用于读取 "),n("code",[s._v("MessageID")]),s._v(".")]),s._v(" "),n("li",[n("code",[s._v("mirai.MessageChain")]),s._v(": "),n("strong",[s._v("只能在事件 FriendMessage, GroupMessage 内使用")]),s._v(", 消息的 "),n("code",[s._v("messageChain")]),s._v(" 对象.")]),s._v(" "),n("li",[n("code",[s._v("mirai.Group")]),s._v(": "),n("strong",[s._v("只能在事件 GroupMessage 内使用")]),s._v(", "),n("code",[s._v("GroupMessage.sender.group")]),s._v(" 实例.")]),s._v(" "),n("li",[n("code",[s._v("mirai.Friend")]),s._v(": "),n("strong",[s._v("只能在事件 FriendMessage 内使用")]),s._v(", "),n("code",[s._v("FriendMessage.sender")]),s._v(" 实例.")]),s._v(" "),n("li",[n("code",[s._v("mirai.Member")]),s._v(": "),n("strong",[s._v("只能在事件 GroupMessage 内使用")]),s._v(", "),n("code",[s._v("GroupMessage.sender")]),s._v(" 实例.")]),s._v(" "),n("li",[n("code",[s._v('"Sender"')]),s._v(": "),n("strong",[s._v("只能在事件 FriendMessage, GroupMessage 内使用")]),s._v(", 消息的 "),n("code",[s._v("sender")]),s._v(" 对象.")]),s._v(" "),n("li",[n("code",[s._v('"Type"')]),s._v(": 事件的名称, 类型 "),n("code",[s._v("str")])]),s._v(" "),n("li",[s._v("各个事件类: "),n("strong",[s._v("只能在其监听内使用")]),s._v(", 当前事件的实例.")])])])}),[],!1,null,null,null);t.default=e.exports}}]);